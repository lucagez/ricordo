!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ricordo=e()}(this,function(){var t=function(t){var e=t.ttl,i=t.ideal,r=t.limit,s=t.force;if(void 0===s&&(s=!1),this.ttl=e,this.ideal=i,this.limit=r,this.force=s,!e||e<1e3)throw new Error("prop `ttl` is required when setting up custom caching");if(this.limit&&!this.ideal)throw new Error("prop `ideal` is required when setting `limit` prop");this.stats=new Map,this.store=new Map};t.prototype.has=function(t){return this.store.has(t)},t.prototype.get=function(t){var e=this.stats.get(t)||0;return this.stats.set(t,e+1),this.store.get(t)},t.prototype.set=function(t,e){var i=this;return this.limit&&this.store.size>=this.limit-1&&this.onLimit(),setTimeout(function(){return i.onTimeout(t)},this.ttl),this.store.set(t,e)},t.prototype.clear=function(){this.store.clear()},t.prototype.delete=function(t){this.store.delete(t)},t.prototype.onTimeout=function(t){var e=this;0===this.stats.get(t)||!this.stats.has(t)||this.force?this.store.delete(t):(this.stats.set(t,0),setTimeout(function(){return e.onTimeout(t)},this.ttl))},t.prototype.onLimit=function(){var t=this,e=Array.from(this.stats).sort(function(t,e){return e[1]-t[1]});e.length=this.ideal;var i=e.map(function(e){return[e[0],t.store.get(e[0])]});this.store=new Map(i)};var e=function(e,i){var r=this;if("function"!=typeof e)throw new TypeError("`func` argument must be of type function");this.func=e,this.cache=i?new t(i):new Map;var s=function(){var t,e,i=(t=this).makeKey.apply(t,arguments);if(this.cache.has(i))return this.cache.get(i);var r=(e=this).func.apply(e,arguments);return this.cache.set(i,r),r}.bind(this);return s.destroy=function(t){t?r.cache.delete(r.makeKey(t)):r.cache.clear()},s};return e.prototype.makeKey=function(){var t=arguments[0];return arguments.length<=1?"object"==typeof t?JSON.stringify(t):t:JSON.stringify(arguments)},e});
//# sourceMappingURL=ricordo.umd.js.map

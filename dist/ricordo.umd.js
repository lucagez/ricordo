!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.ricordo=i()}(this,function(){var t=function(t){var i=t.ttl,e=t.ideal,s=t.limit,n=t.force;if(void 0===n&&(n=!1),this.ttl=i,this.ideal=e,this.limit=s,this.force=n,!i||i<1e3)throw new Error("prop `ttl` is required when setting up custom caching");if(this.limit&&!this.ideal)throw new Error("prop `ideal` is required when setting `limit` prop");this.stats=new Map,this.store=new Map};t.prototype.has=function(t){return this.store.has(t)},t.prototype.get=function(t){var i=this.stats.get(t)||0;return this.stats.set(t,i+1),this.store.get(t)},t.prototype.set=function(t,i){var e=this;return this.limit&&this.store.size>=this.limit-1&&this.onLimit(),setTimeout(function(){return e.onTimeout(t)},this.ttl),this.store.set(t,i)},t.prototype.onTimeout=function(t){var i=this;0!==this.stats.get(t)&&this.stats.has(t)&&this.force?(this.stats.set(t,0),setTimeout(function(){return i.onTimeout(t)},this.ttl)):this.store.delete(t)},t.prototype.onLimit=function(){var t=this,i=Array.from(this.stats).sort(function(t,i){return i[1]-t[1]});i.length=this.ideal;var e=i.map(function(i){return[i[0],t.store.get(i[0])]});this.store=new Map(e)};var i=function(i){return i?new t(i):new Map};return function(t,e){if("function"!=typeof t)throw new TypeError("func argument must be of type `function`");this.func=t,this.init=i,this.config=e,this.cache=i(e);var s=function(){for(var t,i=[],e=arguments.length;e--;)i[e]=arguments[e];var s=i.length<=1?"object"==typeof i[0]?JSON.stringify(i[0]):i[0]:JSON.stringify(i);if(this.cache.has(s))return this.cache.get(s);var n=(t=this).func.apply(t,i);return this.cache.set(s,n),n}.bind(this);return s.destroy=function(){this.cache=this.init(this.config)}.bind(this),s}});
//# sourceMappingURL=ricordo.umd.js.map
